#!/bin/sh

xdg=$(xdg-user-dir DESKTOP)
src='/usr/share/applications'

if [[ -f /usr/bin/thus ]];then
	cp $src/thus.desktop $xdg/thus.desktop
	chmod a+x $xdg/thus.desktop
fi

if [[ -f /usr/bin/calamares ]];then
	cp $src/calamares.desktop $xdg/calamares.desktop
	$xdg/calamares.desktop
	chmod a+x $xdg/calamares.desktop
fi

if [[ -f /usr/bin/setup ]] || [[ -L /usr/bin/setup ]];then
	cp $src/installer-launcher-cli.desktop $xdg/installer-launcher-cli.desktop
	chmod a+x $xdg/installer-launcher-cli.desktop
fi

if [[ -f "/usr/share/doc/livecd/Beginner_User_Guide.pdf" ]]; then
	ln -sf /usr/share/doc/livecd/Beginner_User_Guide.pdf \
	"$xdg/Beginner User Guide.pdf"
fi

if [[ -f "$src/manjaro-welcome.desktop" ]]; then
	cp $src/manjaro-welcome.desktop \
	"$xdg/manjaro-welcome.desktop"
	chmod a+x $xdg/manjaro-welcome.desktop
fi

if [[ -f "$src/hexchat.desktop" ]]; then
	cp $src/hexchat.desktop \
	"$xdg/hexchat.desktop"
	chmod a+x $xdg/hexchat.desktop
fi

# support sonar

if [[ -f "/usr/share/sonar/keyboard_shortcuts.txt" ]]; then
	ln -sf /usr/share/sonar/keyboard_shortcuts.txt \
	"$xdg/keyboard_shortcuts"
fi

if [[ -f "/usr/share/sonar/users_guide.odt" ]]; then
	ln -sf /usr/share/sonar/users_guide.odt \
	"$xdg/users_guide"
fi

if [[ -f "$src/ask_for_help_online.desktop" ]]; then
	cp $src/ask_for_help_online.desktop \
	"$xdg/ask_for_help_online.desktop"
	chmod a+x $xdg/ask_for_help_online.desktop
fi

if [[ -f "$src/connect_to_our_mumble_server_for_help.desktop" ]]; then
	cp $src/connect_to_our_mumble_server_for_help.desktop \
	"$xdg/connect_to_our_mumble_server_for_help.desktop"
	chmod a+x $xdg/connect_to_our_mumble_server_for_help.desktop
fi
